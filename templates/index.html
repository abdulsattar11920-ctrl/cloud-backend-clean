<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Universal Downloader</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

    <div class="container">
        <h1>Universal Downloader</h1>

        <input id="url" type="text" placeholder="Paste video link here">

        <button onclick="startDownload()">Download Video</button>

        <p id="status">ğŸŸ¢ Ready</p>
    </div>

    <script>
        function startDownload() {
            const url = document.getElementById("url").value.trim();
            const status = document.getElementById("status");

            if (!url) {
                status.innerText = "âŒ Please paste a link";
                return;
            }

            status.innerText = "â¬‡ï¸ Downloading... please wait";

            fetch("/download", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                body: "url=" + encodeURIComponent(url)
            })
                .then(res => {
                    if (!res.ok) throw new Error("Download failed");
                    return res.blob();
                })
                .then(blob => {
                    const a = document.createElement("a");
                    a.href = URL.createObjectURL(blob);
                    a.download = "video.mp4";
                    a.click();

                    status.innerText = "âœ… Video download ho gayi";
                })
                .catch(() => {
                    status.innerText = "âŒ Error downloading video";
                });
        }
    </script>

</body>

</html>